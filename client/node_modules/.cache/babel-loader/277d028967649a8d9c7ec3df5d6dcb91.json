{"ast":null,"code":"var _jsxFileName = \"/home/malf/code/game-demo/client/src/App.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { TEngine } from \"./TEngine/TEngine\";\nimport socket from \"./Socket/index\";\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction getPlatform() {\n  var info = navigator.userAgent; //通过正则表达式的test方法判断是否包含“Mobile”字符串\n\n  var isPhone = /mobile/i.test(info); //如果包含“Mobile”（是手机设备）则返回true\n\n  return isPhone;\n}\n\nfunction App() {\n  _s();\n\n  const [alpha, setAlpha] = useState(0);\n  const [beta, setBeta] = useState(0);\n  const [gamma, setGamma] = useState(0);\n  const [t, setT] = useState({\n    x: 0,\n    y: 0,\n    z: 0\n  });\n  useEffect(() => {}, []);\n  useEffect(() => {\n    console.log('first');\n    let isGun = getPlatform();\n\n    if (isGun) {} else {\n      const threeTarget = document.querySelector(\".canvas-three\");\n      const TE = new TEngine(threeTarget);\n      TE.loadGun();\n      TE.loadRoom();\n      socket.on('getdata', t => {});\n    }\n\n    window.addEventListener(\"keydown\", e => {\n      if (e.keyCode === 27) {\n        TE.disableControls();\n      } else if (e.keyCode === 17) {\n        TE.enableControls();\n      }\n    });\n    window.addEventListener('deviceorientation', function (event) {\n      let a = event.alpha;\n      let b = event.beta;\n      let g = event.gamma;\n      TE.setRotate(a, b, g);\n      setAlpha(a.toFixed(2));\n      setBeta(b.toFixed(2));\n      setGamma(g.toFixed(2));\n      setT(TE.target);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"\\u5DE6\\u53F3\\uFF1A\", alpha]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"\\u524D\\u540E\\uFF1A\", beta]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"\\u626D\\u8F6C\\uFF1A\", gamma]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"canvas-three\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: getPlatform()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"wZBIfHIfKAgH8hXjnSDbCpr9woU=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","TEngine","socket","getPlatform","info","navigator","userAgent","isPhone","test","App","alpha","setAlpha","beta","setBeta","gamma","setGamma","t","setT","x","y","z","console","log","isGun","threeTarget","document","querySelector","TE","loadGun","loadRoom","on","window","addEventListener","e","keyCode","disableControls","enableControls","event","a","b","g","setRotate","toFixed","target"],"sources":["/home/malf/code/game-demo/client/src/App.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { TEngine } from \"./TEngine/TEngine\"\nimport socket from \"./Socket/index\"\nimport './App.css';\nfunction getPlatform() {\n\n  var info = navigator.userAgent;\n  //通过正则表达式的test方法判断是否包含“Mobile”字符串\n  var isPhone = /mobile/i.test(info);\n  //如果包含“Mobile”（是手机设备）则返回true\n  return isPhone\n}\nfunction App() {\n  const [alpha, setAlpha] = useState(0)\n  const [beta, setBeta] = useState(0)\n  const [gamma, setGamma] = useState(0)\n  const [t, setT] = useState({ x: 0, y: 0, z: 0 })\n  useEffect(() => {\n  }, [])\n  useEffect(() => {\n    console.log('first')\n    let isGun = getPlatform();\n    if (isGun) {\n\n    } else {\n      const threeTarget = document.querySelector(\".canvas-three\")\n      const TE = new TEngine(threeTarget as HTMLDivElement)\n      TE.loadGun()\n      TE.loadRoom()\n      socket.on('getdata',(t)=>{\n        \n      })\n    }\n\n    window.addEventListener(\"keydown\", (e) => {\n      if (e.keyCode === 27) {\n\n        TE.disableControls()\n\n      } else if (e.keyCode === 17) {\n        TE.enableControls()\n      }\n    })\n    window.addEventListener('deviceorientation', function (event: any) {\n\n      let a = event.alpha;\n      let b = event.beta;\n      let g = event.gamma;\n      TE.setRotate(a, b, g)\n      setAlpha(a.toFixed(2))\n      setBeta(b.toFixed(2))\n      setGamma(g.toFixed(2))\n      setT(TE.target)\n    })\n\n  }, [])\n\n  return (\n    <div className=\"App\">\n\n      <div>左右：{\n        alpha\n      }</div>\n      <div>前后：{\n        beta\n      }</div>\n      <div>扭转：{\n        gamma\n      }</div>\n      <div className='canvas-three'></div>\n      <div>{getPlatform()}</div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}